<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="./css/necessidades.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>  
</head>
<header>
    <img src="./img/voltar_1.png" alt="" id="seta" onclick="window.location.href='./homepage.html'"> 
        <h1>Necessidades</h1>
    <img src="./img/simbolo_2.png" alt="" srcset="" id="icone">
</header>

<body>
    <div class="container" id="containernecessidades1">
        <p>Necessidade 1</p>
        <input type="text" id="necessidades1">
    </div>
    <div class="container" id="containernecessidades2">
        <p>Necessidade 2</p>
        <input type="text" id="necessidades2">
    </div>
    <div class="container" id="containernecessidades3">
        <p>Necessidade 3</p>
        <input type="text" id="necessidades3">
    </div>
    <div class="container" id="containernecessidades4">
        <p>Necessidade 4</p>
        <input type="text" id="necessidades4">
    </div>
    <div class="container" id="containernecessidades5">
        <p>Necessidade 5</p>
        <input type="text" id="necessidades5">
    </div>
    <div class="container" id="containernecessidades6">
        <p>Necessidade 6</p>
        <input type="text" id="necessidades6">
    </div>
    <div class="container" id="containernecessidades7">
        <p>Necessidade 7</p>
        <input type="text" id="necessidades7">
    </div>
    <div class="container" id="containernecessidades8">
        <p>Necessidade 8</p>
        <input type="text" id="necessidaes8">
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script>
        var cookieValue = document.cookie
        .split("; ")
        .find(row => row.startsWith("username="))
        .split("=")[1];
        console.log("Valor do cookie 'username':", cookieValue);

        const firebaseConfig = {
        apiKey: "AIzaSyAQd-7j39OAs1QLlp0sWR2m4Q7kqrnEUeM",
        authDomain: "polemcadastro.firebaseapp.com",
        databaseURL: "https://polemcadastro-default-rtdb.firebaseio.com",
        projectId: "polemcadastro",
        storageBucket: "polemcadastro.appspot.com",
        messagingSenderId: "870994442762",
        appId: "1:870994442762:web:43a83d2cbda78bb254bdf3",
        measurementId: "G-XW9LVSYCC7"
      };
    
      // Inicialize o Firebase
      firebase.initializeApp(firebaseConfig);
    
      // Inicialize o Cloud Firestore e obtenha uma referência para o serviço
      const db = firebase.firestore();
      var userCollection = db.collection("user")
      db.collection("user").where("username", "==", cookieValue)
      .get()
      .then((querySnapshot) =>{
            querySnapshot.forEach((doc) => {
                const userData = doc.data()
                const necessidades1 = userData.necessidade1
                const necessidades2 = userData.necessidade2
                const necessidades3 = userData.necessidade3
                const necessidades4 = userData.necessidade4
                const necessidades5 = userData.necessidade5
                const necessidades6 = userData.necessidade6
                const necessidades7 = userData.necessidade7
                const necessidades8 = userData.necessidade8
                    if (necessidades1 !== '') {
                            document.getElementById("necessidades1").value = necessidades1;
                        }
                    else{
                            document.getElementById("containernecessidades1").style.display = 'none';
                        }
                    if (necessidades2 !== '') {
                            document.getElementById("necessidades2").value = necessidades2;
                        }
                    else{
                            document.getElementById("containernecessidades2").style.display = 'none';
                        }
                    if (necessidades3 !== '') {
                            document.getElementById("necessidades3").value = necessidades3;
                        }
                     else{
                            document.getElementById("containernecessidades3").style.display = 'none';
                        }
                    if (necessidades4 !== '') {
                            document.getElementById("necessidades4").value = necessidades4;
                        }
                     else{
                            document.getElementById("containernecessidades4").style.display = 'none';
                        }
                    if (necessidades5 !== '') {
                            document.getElementById("necessidades5").value = necessidades5;
                        }
                     else{
                            document.getElementById("containernecessidades5").style.display = 'none';
                        }
                    if (necessidades6 !== '') {
                            document.getElementById("necessidades6").value = necessidades6;
                        }
                     else{
                            document.getElementById("containernecessidades6").style.display = 'none';
                        }
                    if (necessidades7 !== '') {
                            document.getElementById("necessidades7").value = necessidades7;
                        }
                     else{
                            document.getElementById("containernecessidades7").style.display = 'none';
                        }
                    if (necessidades8 !== '') {
                            document.getElementById("necessidades8").value = necessidades8;
                        }
                     else{
                            document.getElementById("containernecessidades8").style.display = 'none';
                        }
                })
            });

        function bloquearInputs() {
            var inputs = document.querySelectorAll("input");
            for (var i = 0; i < inputs.length; i++) {
                inputs[i].readOnly = true;
                
            }
        }
        bloquearInputs();
    </script>
</body>

</html>